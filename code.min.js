function Particles(t,i,s,n,a,e,h){this.startx=t,this.starty=i,this.endx=s,this.endy=n,this.radius=a,this.speed=e,this.dx=this.endx-this.startx,this.dy=this.endy-this.starty,this.x=this.startx,this.y=this.starty,this.color=h,this.timer=1.1,this.distance=function(){var t=this.dx*this.dx+this.dy*this.dy;return Math.sqrt(t)},this.moves=this.distance()/this.speed;var o=this.dx/this.moves,r=this.dy/this.moves;this.draw=function(){c.fillStyle=h,c.beginPath(),c.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),c.fill()},this.update=function(t){return this.draw(),this.x+=o,this.y+=r,this.timer-=.01,(this.x+this.radius>canvas.width||this.x-this.radius<0)&&(o=-o),(this.y+this.radius>canvas.height||this.y-this.radius<0)&&(r=-r),this.timer<0?!0:!1}}function Fireworks(t,i,s){this.startX=middlepositionX,this.startY=middlepositionY,this.endX=t,this.endY=i,this.speed=5,this.radius=s,this.dx=this.endX-this.startX,this.dy=this.endY-this.startY,this.x=this.startX,this.y=this.startY,this.distance=function(){var t=this.dx*this.dx+this.dy*this.dy;return Math.sqrt(t)},this.moves=this.distance()/this.speed;var n=this.dx/this.moves,a=this.dy/this.moves;this.draw=function(){c.fillStyle="#ffffff",c.beginPath(),c.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),c.fill()},this.update=function(t){if(this.draw(),this.x+=n,this.y+=a,this.x<MAX_LEFT||this.x>MAX_RIGHT||this.y<MAX_TOP){cannonballs.splice(t,1);for(var i=ParticleArraySize[Math.floor(Math.random()*ParticleArraySize.length)],s=0;i>s;s++){var e=2,h=2*Math.PI*Math.random(),o=colorarray[Math.floor(Math.random()*colorarray.length)];s%5==0&&(e=.5),ParticleArray.push(new Particles(this.x,this.y,this.x+Math.cos(h),this.y+Math.sin(h),3,e,o))}}}}function animate(){requestAnimationFrame(animate),(isMouseDown===!0||isTouchDown===!0)&&(timer++,timer%2==0&&cannonballs.push(new Fireworks(mouse.x,mouse.y,5))),c.fillStyle="rgba(22,22,22,0.4)",c.fillRect(0,0,innerWidth,innerHeight);for(var t=0;t<cannonballs.length;t++)cannonballs[t].update(t);if(0!=ParticleArray.length)for(var i=0;i<ParticleArray.length;i++)ParticleArray[i].update(i)&&ParticleArray.splice(i,1)}function init(){if(initialstate){initialstate=!1;for(var t=0;16>t;t++)cannonballs.push(new Fireworks(mouse.x,mouse.y,5))}console.log(cannonballs)}var canvas=document.querySelector("canvas");canvas.height=window.innerHeight,canvas.width=window.innerWidth;var MAX_LEFT=Math.floor(.2*canvas.width),MAX_RIGHT=canvas.width-MAX_LEFT,MAX_TOP=Math.floor(.4*canvas.height),c=canvas.getContext("2d"),middlepositionX=canvas.width/2,middlepositionY=canvas.height,ParticleArray=[],ParticleArraySize=[9,10,11,12],colorarray=["#ffffff","#42cef4","#f46444"],initialstate=!0,mouse={x:middlepositionX,y:MAX_TOP},cannonballs=[],isMouseDown=!1,isTouchDown=!1;window.addEventListener("mousemove",function(t){mouse.x=t.x,mouse.y=t.y}),window.addEventListener("touchstart",function(t){mouse.x=parseInt(t.changedTouches[0].clientX),mouse.y=parseInt(t.changedTouches[0].clientY),isTouchDown=!0}),window.addEventListener("touchend",function(){isTouchDown=!1}),window.addEventListener("touchmove",function(t){mouse.x=parseInt(t.changedTouches[0].clientX),mouse.y=parseInt(t.changedTouches[0].clientY),isTouchDown=!0}),window.addEventListener("mousedown",function(){isMouseDown=!0}),window.addEventListener("mouseup",function(){isMouseDown=!1}),window.addEventListener("resize",function(){canvas.height=window.innerHeight,canvas.width=window.innerWidth,MAX_LEFT=Math.floor(.2*canvas.width),MAX_RIGHT=canvas.width-MAX_LEFT,MAX_TOP=Math.floor(.4*canvas.height),middlepositionX=canvas.width/2,middlepositionY=canvas.height});var timer=1;init(),animate();